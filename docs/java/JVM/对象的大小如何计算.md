# 对象的大小如何计算

<font style="color:rgb(55, 65, 81);background-color:rgb(247, 247, 248);">在Java中，对象的大小通常是由对象的实例变量、对象头和内部填充组成的。对象的大小计算方法可以简化为以下几个步骤：</font>

1. **<font style="background-color:rgb(247, 247, 248);">计算对象头大小</font>**<font style="color:rgb(55, 65, 81);background-color:rgb(247, 247, 248);">：对象头包含了一些关于对象的</font>**<font style="color:rgb(55, 65, 81);background-color:rgb(247, 247, 248);">元信息</font>**<font style="color:rgb(55, 65, 81);background-color:rgb(247, 247, 248);">，如对象的哈希码、锁状态、垃圾回收信息等。对象头的大小在不同的JVM实现和配置下会有所不同。通常，对象头的大小在64位JVM是8个字节，在32位JVM是4个字节。</font>
2. **<font style="background-color:rgb(247, 247, 248);">计算实例变量大小</font>**<font style="color:rgb(55, 65, 81);background-color:rgb(247, 247, 248);">：对象的实例变量是对象的数据部分，它们占用的内存空间由它们的数据类型和数量决定。例如，一个整数类型的实例变量在64位JVM是8个字节，在32位JVM是4个字节。</font>
3. **<font style="background-color:rgb(247, 247, 248);">计算内部填充大小</font>**<font style="color:rgb(55, 65, 81);background-color:rgb(247, 247, 248);">：为了对齐数据，Java虚拟机通常在实例变量之间插入一些内部填充。填充的大小取决于虚拟机和操作系统的要求，通常是8字节的倍数。这样可以提高内存的访问效率。</font>

<font style="background-color:rgb(247, 247, 248);">综上，</font>**<font style="background-color:rgb(247, 247, 248);">对象总大小</font>**<font style="color:rgb(55, 65, 81);background-color:rgb(247, 247, 248);">等于对象头大小加上实例变量大小和内部填充的大小。</font>





> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/mrn3lhegmd3glv8m>